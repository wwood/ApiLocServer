<%= javascript_tag 'sorttable.js' %>
<style type='txt/css'>
/* Sortable tables. Code copied from the sortable.js library help page */
table.sortable thead {
    background-color:#eee;
    color:#666666;
    font-weight: bold;
    cursor: default;
}	
</style>

<% unless @coding_regions_not_found.empty? %>
<div class=error>
I was unable to find genes with these identifiers:
<table class='sortable'>
	<% @coding_regions_not_found.each do |s| %><td><%= s %></td>
</table>
</div>
<% end %>
	

<table class='sortable'>
  <tr>
    <th>Number</th>
	<th>Species</th>
    <th>Gene ID</th>
    <th>Alternate Names</th>
    <th>Annotation</th>
    <th>Localisations</th>
    <th>References</th>
  </tr>
  
  <% @coding_regions.each_with_index do |coding_region, index| %>
    <tr>
      <td><%= index+1 %></td>
	  <td><%= coding_region.species.name %></td>
      <td><%= link_to coding_region.string_id, :action => :show, :id => coding_region %></td>
      <td><%= coding_region.alternate_names.join(', ') %></td>
      <td><%= coding_region.annotation.nil? ? 'no annotation' : coding_region.annotation.annotation %></td>
      <td>
        <%= coding_region.localisation_english %>
      </td>
      <td>
        <%= coding_region.expression_contexts.reach.publication.uniq.collect { |pub|
          "#{link_to pub.definition, :action => :publication, :id => pub.id}"
        }.join(', ') %>
      </td>
    </tr>
  <% end %>
</table>
